{"version":3,"sources":["components/NodeName.js","components/SearchBar/NodeRow.js","components/SearchBar/component.js","components/SearchBar/connected.js","utils/index.js","components/MapView/Sector.js","components/MapView/NodeMarker.js","components/MapView/KioskMarker.js","components/MapView/LinkLine.js","components/NodeDetail/component.js","components/NodeDetail/connected.js","components/Gallery/component.js","components/Gallery/connected.js","components/MapView/component.js","components/MapView/styles.js","components/MapView/connected.js","components/Filters/component.js","components/Filters/connected.js","actions/index.js","reducers/index.js","App.js","index.js"],"names":["icons","dead","react_default","a","createElement","xmlns","width","height","cx","cy","r","stroke","strokeWidth","fill","opacity","potential","potential-hub","potential-supernode","active","hub","supernode","linkNYC","NodeName","_this$props","this","props","node","search","name","concat","id","className","type","main_default","highlightClassName","searchWords","autoEscape","textToHighlight","notes","PureComponent","NodeRow","onClick","Link","to","key","NodeName_NodeName","SearchBar","state","filteredNodes","showDropdown","focused","keyDownHandler","handleKeyDown","bind","window","addEventListener","removeEventListener","event","history","_this$state","keyCode","length","push","setState","refs","blur","prevProps","prevState","nodes","filterSearch","renderSearchBar","renderList","_this2","focus","viewBox","strokeLinecap","strokeLinejoin","style","minWidth","x1","y1","x2","y2","ref","value","placeholder","spellCheck","autoCorrect","onFocus","onBlur","onChange","target","renderClearButton","_this3","map","NodeRow_NodeRow","_this4","lowerSearch","toLowerCase","Object","toConsumableArray","filter","parseInt","notesMatch","indexOf","nameMatches","sort","b","status","withRouter","connect","ownProps","tickets","dispatch","PureSearchBar","nodeColors","kiosk","sectorColors","default","visibilityMultipliers","highlight","secondary","dim","zIndexes","Sector","sector","visibility","_sector$node$coordina","slicedToArray","coordinates","lng","lat","radius","azimuth","visibilityMultiplier","multiplier","undefined","intervalCount","Math","ceil","fillOpacity","fillColor","getFillColor","zIndex","interval","Array","keys","index","path","centerPoint","PRlat","PI","PRlng","cos","PGpoints","lat1","lon1","sin","lat2","lon2","theta","gamma","PGlon","PGlat","getPath","lib","options","strokeColor","strokeOpacity","clickable","_this$props2","NodeMarker","visible","_coordinates","title","_this$getMarkerProps","getMarkerProps","icon","adjustedZ","getZIndex","getOpacity","react","defaultPosition","defaultIcon","defaultTitle","renderSectors","filters","sectors","Sector_Sector","defaultZIndex","url","anchor","x","y","VisibilityMarker","NodeMarker_NodeMarker","assign","KioskMarker","_kiosk$coordinates","LinkLine","link","fromNode","toNode","_fromNode$coordinates","lng1","_toNode$coordinates","lng2","latlng1","latlng2","_this$getLineProps","getLineProps","strokeWeight","defaultOpacity","bonus","getPixelPositionOffset","NodeDetail","nodeId","nodesById","position","google","maps","LatLng","mapPaneName","OverlayView","OVERLAY_MOUSE_TARGET","preventMapHitsFrom","renderImage","version","aria-hidden","fillRule","d","panoramas","firstPanorama","backgroundImage","Gallery","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","getPanoramas","preventDefault","stopPropagation","match","_match$params","params","panoId","panoIdInt","nextPanoId","prevPanoId","_match$params2","src","react_document_title_default","open","alt","renderPreviews","_match$params3","panorama","PureGallery","DEFAULT_CENTER","styles","elementType","stylers","featureType","fullscreenControl","streetViewControl","zoomControlOptions","mapTypeControlOptions","backgroundColor","gestureHandling","clickableIcons","MapComponent","withScriptjs","withGoogleMap","mapRef","children","MapView","commandPressed","React","createRef","markerRefs","lineRefs","lastDoubleClick","Date","now","keyUpHandler","handleKeyUp","setTimeout","handleSelectedChange","e","console","error","nextProps","nodesChanged","isEqual","matchChanged","filtersChanged","resetAllNodes","nextSelectedMarkers","selectedNodeIds","m","nextSelectedNodes","marker","updateNodes","fitBounds","updateLinks","panToNodes","defaultZoom","defaultCenter","defaultOptions","onDblClick","loadingElement","containerElement","mapElement","googleMapURL","renderLinks","renderKiosks","renderNodes","renderNodeDetail","es_Route","exact","component","_this5","selectedIds","reduce","idMap","objectSpread","defineProperty","isFiltered","isSelected","neighborIsSelected","links","forEach","from","NodeMarker_VisibilityMarker","handleNodeClick","handleMarkerRef","_this6","LinkLine_LinkLine","linkId","handleLineRef","kiosks","KioskMarker_KioskMarker","nodeIds","nodeTitles","join","NodeDetail_connected","_this$props3","selectedId","toString","newNodeIds","newNodeIdString","uniq","replace","_this7","ReactDOM","unstable_batchedUpdates","values","setVisibility","line","selectedNodes","markers","_this8","connectedNodes","connectedMarker","_this9","minLng","minLat","maxLng","maxLat","_node$coordinates","newBounds","east","north","south","west","current","innerWidth","panToBounds","_nodes$0$coordinates","panTo","arguments","split","Component","PureMapView","labels","Filters","toggleFilter","URLSearchParams","location","get","role","label","renderFilter","statusCounts","enabled","htmlFor","color","marginLeft","marginRight","marginTop","marginBottom","defaultChecked","PureFilters","initialFilters","linksByNodeId","nodeStatus","lowerNotes","isSupernode","isHub","notPotentialHub","hasPanoramas","nodeType","linkStatus","sectorsByNodeId","addGraphData","nodeData","linkData","sectorData","reducer","counts","action","newFilters","newValue","store","createStore","rootReducer","App","es","BrowserRouter","basename","connected","Route","_ref","MapView_connected","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.2a565099.chunk.js","sourcesContent":["import React, { PureComponent } from \"react\";\nimport Highlighter from \"react-highlight-words\";\n\nexport const icons = {\n\tdead: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\">\n\t\t\t<circle\n\t\t\t\tcx=\"7\"\n\t\t\t\tcy=\"7\"\n\t\t\t\tr=\"5\"\n\t\t\t\tstroke=\"#fff\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tfill=\"#aaa\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\tpotential: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\">\n\t\t\t<circle\n\t\t\t\tcx=\"8\"\n\t\t\t\tcy=\"8\"\n\t\t\t\tr=\"6\"\n\t\t\t\tstroke=\"#fff\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tfill=\"#777\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\t\"potential-hub\": (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\">\n\t\t\t<circle\n\t\t\t\tfill=\"#777\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tr=\"8\"\n\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\tcy=\"11\"\n\t\t\t\tcx=\"11\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\t\"potential-supernode\": (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\">\n\t\t\t<g>\n\t\t\t\t<circle\n\t\t\t\t\topacity=\"1\"\n\t\t\t\t\tfill=\"#777\"\n\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\tr=\"10\"\n\t\t\t\t\tcy=\"14\"\n\t\t\t\t\tcx=\"14\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\tactive: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\">\n\t\t\t<circle\n\t\t\t\tfill=\"rgb(255,45,85)\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tr=\"6\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tcx=\"8\"\n\t\t\t\tcy=\"8\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\thub: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\">\n\t\t\t<circle\n\t\t\t\tfill=\"rgb(90,200,250)\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tr=\"8\"\n\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\tcy=\"11\"\n\t\t\t\tcx=\"11\"\n\t\t\t/>\n\t\t</svg>\n\t),\n\tsupernode: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\">\n\t\t\t<g>\n\t\t\t\t<circle\n\t\t\t\t\topacity=\"1\"\n\t\t\t\t\tfill=\"#007aff\"\n\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\tr=\"10\"\n\t\t\t\t\tcy=\"14\"\n\t\t\t\t\tcx=\"14\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\tlinkNYC: (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\">\n\t\t\t<circle\n\t\t\t\tcx=\"10\"\n\t\t\t\tcy=\"10\"\n\t\t\t\tr=\"3\"\n\t\t\t\tstroke=\"white\"\n\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\tfill=\"#01a2eb\"\n\t\t\t\topacity=\"1\"\n\t\t\t/>\n\t\t</svg>\n\t)\n};\n\nexport default class NodeName extends PureComponent {\n\trender() {\n\t\tconst { node, search } = this.props;\n\t\tconst name = node.name || `Node ${node.id}`;\n\t\treturn (\n\t\t\t<div className=\"h1 w-100 overflow-visible flex justify-start items-center\">\n\t\t\t\t<div className=\"h2 w2 min-h2 min-w2 flex items-center justify-center\">\n\t\t\t\t\t{icons[node.type]}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"pl1 flex-1 truncate\">\n\t\t\t\t\t<span className=\"db f5 fw6 black mv0\">\n\t\t\t\t\t\t<Highlighter\n\t\t\t\t\t\t\thighlightClassName=\"bg-light-yellow\"\n\t\t\t\t\t\t\tsearchWords={[search]}\n\t\t\t\t\t\t\tautoEscape={true}\n\t\t\t\t\t\t\ttextToHighlight={name}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t{node.notes ? (\n\t\t\t\t\t\t<span className=\"db f7 gray mv05 truncate\">\n\t\t\t\t\t\t\t<Highlighter\n\t\t\t\t\t\t\t\thighlightClassName=\"bg-light-yellow dark-gray\"\n\t\t\t\t\t\t\t\tsearchWords={[search]}\n\t\t\t\t\t\t\t\tautoEscape={true}\n\t\t\t\t\t\t\t\ttextToHighlight={node.notes}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport NodeName from \"../NodeName\";\n\nexport default class NodeRow extends PureComponent {\n\trender() {\n\t\tconst { node, search, onClick } = this.props;\n\t\tconst { id } = node;\n\t\treturn (\n\t\t\t<Link className=\"link\" to={`/nodes/${id}`}>\n\t\t\t\t<div\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName=\"pointer hover-bg-near-white bb b--light-gray pa3 pl2\"\n\t\t\t\t>\n\t\t\t\t\t<NodeName node={node} search={search} />\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t);\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { withRouter } from \"react-router\";\n\nimport NodeRow from \"./NodeRow\";\n\nclass SearchBar extends PureComponent {\n\tstate = {\n\t\tfilteredNodes: [],\n\t\tsearch: \"\",\n\t\tshowDropdown: false,\n\t\tfocused: false\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.keyDownHandler = this.handleKeyDown.bind(this);\n\t\twindow.addEventListener(\"keydown\", this.keyDownHandler, false);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"keydown\", this.keyDownHandler, false);\n\t}\n\n\thandleKeyDown(event) {\n\t\tconst { history } = this.props;\n\t\tconst { focused, filteredNodes } = this.state;\n\t\tconst { keyCode } = event;\n\t\tif (keyCode === 13 && focused && filteredNodes.length) {\n\t\t\thistory.push(`/nodes/${filteredNodes[0].id}`);\n\t\t\tthis.setState({ showDropdown: false });\n\t\t\tthis.refs.search.blur();\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t// Super hacky, do this better\n\t\tif (\n\t\t\tprevState.search === this.state.search &&\n\t\t\tprevProps.nodes !== this.props.nodes\n\t\t) {\n\t\t\tthis.setState({\n\t\t\t\tfilteredNodes: this.filterSearch(this.state.search)\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"w-100 shadow-2\">\n\t\t\t\t{this.renderSearchBar()}\n\t\t\t\t{this.renderList()}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderSearchBar() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"flex items-center bg-white overflow-hidden\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\tthis.refs.search.focus();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\twidth=\"20\"\n\t\t\t\t\theight=\"20\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tstroke=\"#aaa\"\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\tclassName=\"ml3 db\"\n\t\t\t\t\tstyle={{ minWidth: 20 }}\n\t\t\t\t>\n\t\t\t\t\t<circle cx=\"11\" cy=\"11\" r=\"8\" />\n\t\t\t\t\t<line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" />\n\t\t\t\t</svg>\n\t\t\t\t<input\n\t\t\t\t\tref=\"search\"\n\t\t\t\t\tclassName=\"sans-serif overflow-hidden pl2 pr3 pv3 input-reset f5 fw4 bw0 w-100 on\"\n\t\t\t\t\tvalue={this.state.search}\n\t\t\t\t\tplaceholder=\"Search nodes\"\n\t\t\t\t\tspellCheck={false}\n\t\t\t\t\tautoCorrect=\"false\"\n\t\t\t\t\tonFocus={() =>\n\t\t\t\t\t\tthis.setState({ showDropdown: true, focused: true })\n\t\t\t\t\t}\n\t\t\t\t\tonBlur={() => this.setState({ focused: false })}\n\t\t\t\t\tonChange={event =>\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tsearch: event.target.value,\n\t\t\t\t\t\t\tfilteredNodes: this.filterSearch(event.target.value)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{this.renderClearButton()}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderList() {\n\t\tif (!this.state.filteredNodes.length || !this.state.showDropdown) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { search } = this.state;\n\t\treturn (\n\t\t\t<div className=\"bg-white bt b--light-gray max-h-5-rows overflow-y-scroll\">\n\t\t\t\t{this.state.filteredNodes.map(node => (\n\t\t\t\t\t<NodeRow\n\t\t\t\t\t\tkey={node.id}\n\t\t\t\t\t\tnode={node}\n\t\t\t\t\t\tsearch={search}\n\t\t\t\t\t\tonClick={() => this.setState({ showDropdown: false })}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderClearButton() {\n\t\tconst { search } = this.state;\n\n\t\tif (!search || !search.length) {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"mr3\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: 20,\n\t\t\t\t\t\theight: 20\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\tonClick={() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tsearch: \"\",\n\t\t\t\t\t\tfilteredNodes: []\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tclassName=\"on btn bn pa0 bg-white pointer mr3 silver\"\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\twidth=\"20\"\n\t\t\t\t\theight=\"20\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\tclassName=\"db\"\n\t\t\t\t>\n\t\t\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n\t\t\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t);\n\t}\n\n\tfilterSearch(search) {\n\t\tconst { nodes } = this.props;\n\t\tif (!search) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst lowerSearch = search.toLowerCase();\n\n\t\treturn [\n\t\t\t...nodes.filter(\n\t\t\t\tnode =>\n\t\t\t\t\tnode.id === parseInt(search, 10) ||\n\t\t\t\t\tlowerSearch === `node ${node.id}`\n\t\t\t),\n\t\t\t...nodes\n\t\t\t\t.filter(node => {\n\t\t\t\t\tconst notesMatch =\n\t\t\t\t\t\tnode.notes &&\n\t\t\t\t\t\tnode.notes.toLowerCase().indexOf(lowerSearch) > -1;\n\t\t\t\t\tconst nameMatches =\n\t\t\t\t\t\tnode.name &&\n\t\t\t\t\t\tnode.name.toLowerCase().indexOf(lowerSearch) > -1;\n\t\t\t\t\treturn notesMatch || nameMatches;\n\t\t\t\t})\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tif (a.status !== b.status) {\n\t\t\t\t\t\tif (a.status === \"active\") return -1;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn a.id - b.id;\n\t\t\t\t})\n\t\t];\n\t}\n}\n\nexport default withRouter(SearchBar);\n","import { connect } from \"react-redux\";\nimport PureSearchBar from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodes: state.nodes,\n\ttickets: state.tickets\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PureSearchBar);\n","export function nodeType(node) {\n\tconst { status, notes, panoramas } = node;\n\tconst lowerNotes = notes ? notes.toLowerCase() : null;\n\tconst isSupernode = notes && lowerNotes.indexOf(\"supernode\") > -1;\n\tconst isHub = notes && lowerNotes.indexOf(\"hub\") > -1;\n\tconst notPotentialHub = !notes || lowerNotes.indexOf(\"hub?\") === -1;\n\tconst hasPanoramas = panoramas && panoramas.length;\n\n\tif (status === \"active\") {\n\t\tif (isSupernode) return \"supernode\";\n\t\tif (isHub && notPotentialHub) return \"hub\";\n\t\treturn \"active\";\n\t}\n\n\tif (isSupernode) return \"potential-supernode\";\n\tif (isHub) return \"potential-hub\";\n\tif (hasPanoramas) return \"potential\";\n\treturn \"dead\";\n}\n\nexport function nodeStatus(node) {\n\tconst { status } = node;\n\tconst isActive = status === \"Installed\";\n\treturn isActive ? \"active\" : \"potential\";\n}\n\n// TODO: Move this to node-db\nexport function linkStatus(link) {\n\tconst { status, fromNode, toNode } = link;\n\tif (!fromNode || !toNode) return \"invalid\";\n\tif (\n\t\tstatus === \"active\" &&\n\t\tfromNode.status === \"active\" &&\n\t\ttoNode.status === \"active\"\n\t)\n\t\treturn \"active\";\n\treturn \"potential\";\n}\n\nexport const nodeColors = {\n\tactive: \"rgb(255,45,85)\",\n\tdead: \"#aaa\",\n\thub: \"rgb(90,200,250)\",\n\tkiosk: \"#01a2eb\",\n\tlinkNYC: \"#01a2eb\",\n\t\"potential-hub\": \"#777\",\n\t\"potential-supernode\": \"#777\",\n\tpotential: \"#777\",\n\tsupernode: \"#007aff\"\n};\n\nexport const sectorColors = {\n\tsupernode: \"#007aff\",\n\t\"potential-hub\": \"#aaa\",\n\t\"potential-supernode\": \"#aaa\",\n\tpotential: \"#aaa\",\n\tdefault: \"#007aff\"\n};\n","import React, { PureComponent } from \"react\";\nimport { Polygon } from \"react-google-maps\";\nimport { sectorColors } from \"../../utils\";\n\nconst MAX_OPACITY = 0.4;\nconst INTERVAL_PER_MILE = 10;\n\nconst visibilityMultipliers = {\n\thighlight: 1,\n\tsecondary: 0,\n\tdim: 0\n};\n\nconst zIndexes = {\n\thighlight: 3,\n\tdim: 1\n};\n\nexport default class Sector extends PureComponent {\n\trender() {\n\t\tconst { sector, visibility } = this.props;\n\n\t\tconst [lng, lat] = sector.node.coordinates;\n\t\tconst { radius, azimuth, width } = sector;\n\n\t\tconst visibilityMultiplier = visibilityMultipliers[visibility];\n\t\tconst multiplier =\n\t\t\tvisibilityMultiplier === undefined ? 1 : visibilityMultiplier;\n\t\tconst intervalCount = Math.ceil(INTERVAL_PER_MILE * radius);\n\t\tconst fillOpacity = (MAX_OPACITY / intervalCount) * multiplier;\n\t\tconst fillColor = this.getFillColor();\n\t\tconst zIndex = zIndexes[visibility] || 1;\n\n\t\tconst interval = radius / intervalCount;\n\t\tconst radiusIndices = [...Array(intervalCount).keys()];\n\n\t\treturn radiusIndices.map(index => {\n\t\t\tconst circleRadius = interval * index;\n\t\t\tconst path = getPath(lat, lng, circleRadius, azimuth, width);\n\t\t\treturn (\n\t\t\t\t<Polygon\n\t\t\t\t\tkey={index}\n\t\t\t\t\tpath={path}\n\t\t\t\t\toptions={{\n\t\t\t\t\t\tstrokeColor: \"transparent\",\n\t\t\t\t\t\tstrokeOpacity: 0,\n\t\t\t\t\t\tstrokeWidth: 0,\n\t\t\t\t\t\tfillColor,\n\t\t\t\t\t\tfillOpacity,\n\t\t\t\t\t\tclickable: false,\n\t\t\t\t\t\tzIndex\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\tgetFillColor() {\n\t\tconst { sector, node } = this.props;\n\t\t// TODO: Make this not hacky\n\t\treturn (\n\t\t\tsectorColors[sector.status] ||\n\t\t\tsectorColors[node.type] ||\n\t\t\tsectorColors.default\n\t\t);\n\t}\n}\n\nfunction getPath(lat, lng, radius, azimuth, width) {\n\tvar centerPoint = { lat, lng };\n\tvar PRlat = (radius / 3963) * (180 / Math.PI); // using 3963 miles as earth's radius\n\tvar PRlng = PRlat / Math.cos(lat * (Math.PI / 180));\n\tvar PGpoints = [];\n\tPGpoints.push(centerPoint);\n\n\tconst lat1 =\n\t\tlat + PRlat * Math.cos((Math.PI / 180) * (azimuth - width / 2));\n\tconst lon1 =\n\t\tlng + PRlng * Math.sin((Math.PI / 180) * (azimuth - width / 2));\n\tPGpoints.push({ lat: lat1, lng: lon1 });\n\n\tconst lat2 =\n\t\tlat + PRlat * Math.cos((Math.PI / 180) * (azimuth + width / 2));\n\tconst lon2 =\n\t\tlng + PRlng * Math.sin((Math.PI / 180) * (azimuth + width / 2));\n\n\tvar theta = 0;\n\tvar gamma = (Math.PI / 180) * (azimuth + width / 2);\n\n\tfor (var a = 1; theta < gamma; a++) {\n\t\ttheta = (Math.PI / 180) * (azimuth - width / 2 + a);\n\t\tconst PGlon = lng + PRlng * Math.sin(theta);\n\t\tconst PGlat = lat + PRlat * Math.cos(theta);\n\n\t\tPGpoints.push({ lat: PGlat, lng: PGlon });\n\t}\n\n\tPGpoints.push({ lat: lat2, lng: lon2 });\n\tPGpoints.push(centerPoint);\n\n\treturn PGpoints;\n}\n","import React, { PureComponent, Fragment } from \"react\";\nimport { Marker } from \"react-google-maps\";\nimport Sector from \"./Sector\";\n\nclass NodeMarker extends PureComponent {\n\trender() {\n\t\tconst { node, visible, onClick } = this.props;\n\t\tconst { id, notes, coordinates } = node;\n\t\tconst [lng, lat] = coordinates;\n\t\tconst title = `${id}${notes ? ` - ${notes}` : \"\"}`;\n\t\tconst { icon, zIndex } = this.getMarkerProps();\n\t\tconst adjustedZ = this.getZIndex(zIndex);\n\t\tconst opacity = this.getOpacity();\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Marker\n\t\t\t\t\tdefaultPosition={{ lat, lng }}\n\t\t\t\t\tdefaultIcon={icon}\n\t\t\t\t\tdefaultTitle={title}\n\t\t\t\t\toptions={{ opacity }}\n\t\t\t\t\tvisible={visible}\n\t\t\t\t\tzIndex={adjustedZ}\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t/>\n\t\t\t\t{this.renderSectors()}\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderSectors() {\n\t\tconst { node, visible, visibility, filters } = this.props;\n\t\tconst { sectors } = node;\n\n\t\tif (!sectors || !visible) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn sectors.map(sector => {\n\t\t\tconst isFiltered =\n\t\t\t\tsector.status === \"potential\" &&\n\t\t\t\tfilters[sector.status] === false;\n\t\t\tif (isFiltered && visibility !== \"highlight\") {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst key = node.id + sector.azimuth;\n\t\t\treturn (\n\t\t\t\t<Sector\n\t\t\t\t\tkey={key}\n\t\t\t\t\tsector={sector}\n\t\t\t\t\tvisibility={visibility}\n\t\t\t\t\tnode={node}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\tgetOpacity() {\n\t\tconst { visibility } = this.props;\n\t\tif (visibility === \"highlight\") return 1;\n\t\tif (visibility === \"secondary\") return 1;\n\t\tif (visibility === \"dim\") return 0.25;\n\t\treturn 1;\n\t}\n\n\tgetZIndex(defaultZIndex) {\n\t\tconst { visibility } = this.props;\n\t\tif (visibility === \"highlight\") return defaultZIndex + 999;\n\t\tif (visibility === \"secondary\") return defaultZIndex + 998;\n\t\treturn defaultZIndex;\n\t}\n\n\tgetMarkerProps() {\n\t\tconst { node } = this.props;\n\t\tconst { type } = node;\n\n\t\tif (type === \"supernode\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/supernode.svg\",\n\t\t\t\t\tanchor: { x: 14, y: 14 }\n\t\t\t\t},\n\t\t\t\tzIndex: 100\n\t\t\t};\n\n\t\tif (type === \"hub\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/hub.svg\",\n\t\t\t\t\tanchor: { x: 10, y: 10 }\n\t\t\t\t},\n\t\t\t\tzIndex: 99\n\t\t\t};\n\n\t\tif (type === \"active\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/active.svg\",\n\t\t\t\t\tanchor: { x: 7, y: 7 }\n\t\t\t\t},\n\t\t\t\tzIndex: 98\n\t\t\t};\n\n\t\tif (type === \"potential-supernode\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential-supernode.svg\",\n\t\t\t\t\tanchor: { x: 14, y: 14 }\n\t\t\t\t},\n\t\t\t\tzIndex: 89\n\t\t\t};\n\n\t\tif (type === \"potential-hub\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential-hub.svg\",\n\t\t\t\t\tanchor: { x: 10, y: 10 }\n\t\t\t\t},\n\t\t\t\tzIndex: 88\n\t\t\t};\n\n\t\tif (type === \"potential\")\n\t\t\treturn {\n\t\t\t\ticon: {\n\t\t\t\t\turl: \"/img/map/potential.svg\",\n\t\t\t\t\tanchor: { x: 7, y: 7 }\n\t\t\t\t},\n\t\t\t\tzIndex: 87\n\t\t\t};\n\n\t\treturn {\n\t\t\ticon: {\n\t\t\t\turl: \"/img/map/dead.svg\",\n\t\t\t\tanchor: { x: 5, y: 5 }\n\t\t\t},\n\t\t\tzIndex: 86\n\t\t};\n\t}\n}\n\nexport default class VisibilityMarker extends PureComponent {\n\tstate = {\n\t\tvisibility: \"default\"\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<NodeMarker {...this.props} visibility={this.state.visibility} />\n\t\t);\n\t}\n\n\tsetVisibility(visibility) {\n\t\tthis.setState({ visibility });\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Marker } from \"react-google-maps\";\n\nexport default class KioskMarker extends PureComponent {\n\trender() {\n\t\tconst { kiosk } = this.props;\n\t\tconst [lng, lat] = kiosk.coordinates;\n\t\tconst icon = {\n\t\t\turl: \"/img/map/kiosk.svg\",\n\t\t\tanchor: { x: 5, y: 5 }\n\t\t};\n\t\treturn <Marker defaultPosition={{ lat, lng }} icon={icon} zIndex={1} />;\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { Polyline } from \"react-google-maps\";\n\nexport default class LinkLine extends PureComponent {\n\tstate = {\n\t\tvisibility: \"default\"\n\t};\n\n\trender() {\n\t\tconst { link, visible } = this.props;\n\t\tconst { fromNode, toNode } = link;\n\n\t\tif (!fromNode || !toNode) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst [lng1, lat1] = fromNode.coordinates;\n\t\tconst [lng2, lat2] = toNode.coordinates;\n\t\tconst latlng1 = { lat: lat1, lng: lng1 };\n\t\tconst latlng2 = { lat: lat2, lng: lng2 };\n\n\t\tconst { strokeColor, strokeOpacity, zIndex } = this.getLineProps();\n\n\t\treturn (\n\t\t\t<Polyline\n\t\t\t\tpath={[latlng1, latlng2]}\n\t\t\t\toptions={{\n\t\t\t\t\tstrokeColor,\n\t\t\t\t\tstrokeWeight: 2.5,\n\t\t\t\t\tstrokeOpacity: this.getOpacity(strokeOpacity),\n\t\t\t\t\tzIndex: this.getZIndex(zIndex)\n\t\t\t\t}}\n\t\t\t\tvisible={visible}\n\t\t\t/>\n\t\t);\n\t}\n\n\tgetOpacity(defaultOpacity) {\n\t\tconst { visibility } = this.state;\n\t\tswitch (visibility) {\n\t\t\tcase \"highlight\":\n\t\t\t\treturn 1;\n\t\t\tcase \"dim\":\n\t\t\t\treturn defaultOpacity * 0.1;\n\t\t\tdefault:\n\t\t\t\treturn defaultOpacity;\n\t\t}\n\t}\n\n\tgetZIndex(defaultZIndex) {\n\t\tconst { link } = this.props;\n\t\tconst { visibility } = this.state;\n\t\tconst bonus = link.status === \"active\" ? 20 : 0;\n\t\tif (visibility === \"highlight\") return 30 + bonus;\n\t\treturn defaultZIndex + bonus;\n\t}\n\n\tsetVisibility(visibility) {\n\t\tthis.setState({ visibility });\n\t}\n\n\tgetLineProps() {\n\t\tconst { link } = this.props;\n\t\tconst { status } = link;\n\n\t\tconst defaultOpacity = 1;\n\n\t\tif (status === \"active\")\n\t\t\treturn {\n\t\t\t\tstrokeColor: \"#007aff\",\n\t\t\t\tstrokeOpacity: defaultOpacity,\n\t\t\t\tzIndex: 10\n\t\t\t};\n\n\t\treturn {\n\t\t\tstrokeColor: \"#aaa\",\n\t\t\tstrokeOpacity: defaultOpacity,\n\t\t\tzIndex: 0\n\t\t};\n\t}\n}\n","import React, { PureComponent } from \"react\";\nimport { OverlayView } from \"react-google-maps\";\nimport { Link } from \"react-router-dom\";\n\nconst getPixelPositionOffset = (width, height) => ({\n\tx: -width / 2,\n\ty: -height\n});\n\nexport default class NodeDetail extends PureComponent {\n\trender() {\n\t\tconst { nodeId, nodesById } = this.props;\n\n\t\tif (!nodeId || !nodesById) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst node = nodesById[nodeId];\n\t\tif (!node) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { coordinates } = node;\n\t\tconst [lng, lat] = coordinates;\n\n\t\treturn (\n\t\t\t<OverlayView\n\t\t\t\tposition={new window.google.maps.LatLng(lat, lng)}\n\t\t\t\tmapPaneName={OverlayView.OVERLAY_MOUSE_TARGET}\n\t\t\t\tgetPixelPositionOffset={getPixelPositionOffset}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tref={ref =>\n\t\t\t\t\t\tref &&\n\t\t\t\t\t\twindow.google.maps.OverlayView.preventMapHitsFrom(ref)\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"flex flex-column items-center\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex items-center bg-white br2 overflow-hidden shadow-2\">\n\t\t\t\t\t\t{this.renderImage(node)}\n\t\t\t\t\t\t<div className=\"pv1 ph2 flex flex-column justify-end\">\n\t\t\t\t\t\t\t<span className=\"f5 fw6 nowrap sans-serif\">\n\t\t\t\t\t\t\t\t{node.name || node.id}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<svg\n\t\t\t\t\t\tviewBox=\"0 5 12 12\"\n\t\t\t\t\t\tversion=\"1.1\"\n\t\t\t\t\t\twidth=\"12\"\n\t\t\t\t\t\theight=\"12\"\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\tfill=\"white\"\n\t\t\t\t\t\t\td=\"M0 5l6 6 6-6H0z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</OverlayView>\n\t\t);\n\t}\n\n\trenderImage(node) {\n\t\tconst { id, panoramas } = node;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn null;\n\t\t}\n\t\tconst [firstPanorama] = panoramas;\n\t\treturn (\n\t\t\t<Link to={`/nodes/${id}/panoramas/1`} className=\"db h2 w2\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"h-100 w-100 cover bg-center bg-near-white\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundImage: `url(\"https://node-db.netlify.com/panoramas/${firstPanorama}\")`\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Link>\n\t\t);\n\t}\n\n\trenderNotes(node) {\n\t\tconst { notes } = node;\n\t\tif (!notes) {\n\t\t\treturn null;\n\t\t}\n\t\treturn <span className=\"mv0 f7 gray truncate sans-serif\">{notes}</span>;\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureComponent from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodesById: state.nodesById\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureComponent);\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport DocumentTitle from \"react-document-title\";\n\nexport default class Gallery extends PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tpanoramas: this.getPanoramas()\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.keyDownHandler = this.handleKeyDown.bind(this);\n\t\twindow.addEventListener(\"keydown\", this.keyDownHandler, true);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"keydown\", this.keyDownHandler, true);\n\t}\n\n\thandleKeyDown(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tconst { keyCode } = event;\n\t\tconst { match, history } = this.props;\n\t\tconst { panoramas } = this.state;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst panoIdInt = parseInt(panoId);\n\t\tif (keyCode === 27) {\n\t\t\thistory.push(`/nodes/${nodeId}`);\n\t\t} else if (keyCode === 39) {\n\t\t\tconst nextPanoId = panoIdInt < panoramas.length ? panoIdInt + 1 : 1;\n\t\t\thistory.push(`/nodes/${nodeId}/panoramas/${nextPanoId}`);\n\t\t} else if (keyCode === 37) {\n\t\t\tconst prevPanoId = panoId > 1 ? panoIdInt - 1 : panoramas.length;\n\t\t\thistory.push(`/nodes/${nodeId}/panoramas/${prevPanoId}`);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { match } = this.props;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst { panoramas } = this.state;\n\t\tconst src = panoramas[panoId - 1];\n\n\t\treturn (\n\t\t\t<DocumentTitle\n\t\t\t\ttitle={`Panorama ${panoId} - Node ${nodeId} - NYC Mesh`}\n\t\t\t>\n\t\t\t\t<div className=\"fixed absolute--fill bg-black flex flex-column items-center justify-center z-max\">\n\t\t\t\t\t<Link to=\"..\" className=\"absolute top-0 left-0 ma3 white\">\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\tclassName=\"db ma0\"\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\twidth=\"24\"\n\t\t\t\t\t\t\theight=\"24\"\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n\t\t\t\t\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</Link>\n\n\t\t\t\t\t<img\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\twindow\n\t\t\t\t\t\t\t\t.open(\n\t\t\t\t\t\t\t\t\t`https://node-db.netlify.com/panoramas/${src}`,\n\t\t\t\t\t\t\t\t\t\"_blank\"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.focus()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclassName=\"db center mh-100 mw-100 zoom-in\"\n\t\t\t\t\t\tsrc={`https://node-db.netlify.com/panoramas/${src}`}\n\t\t\t\t\t\talt=\"Panorama\"\n\t\t\t\t\t/>\n\t\t\t\t\t{this.renderPreviews()}\n\t\t\t\t</div>\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\trenderPreviews() {\n\t\tconst { match } = this.props;\n\t\tconst { nodeId, panoId } = match.params;\n\t\tconst { panoramas } = this.state;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"absolute bottom-0 right-0 left-0 flex ph1 pv2 overflow-x-scroll\">\n\t\t\t\t{panoramas.map((panorama, index) => (\n\t\t\t\t\t<Link\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tto={`/nodes/${nodeId}/panoramas/${index + 1}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={`node-image mh1 cover ba bw1 b--white ${\n\t\t\t\t\t\t\t\tindex === panoId - 1 ? \"\" : \"o-30\"\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackgroundImage: `url(\"https://node-db.netlify.com/panoramas/${panorama}\")`\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Link>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tgetPanoramas() {\n\t\tconst { match, nodesById } = this.props;\n\t\tconst { nodeId } = match.params;\n\t\tconst node = nodesById[nodeId];\n\n\t\tif (!node) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst { panoramas } = node;\n\t\tif (!panoramas || !panoramas.length) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn panoramas;\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureGallery from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodesById: state.nodesById\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureGallery);\n","import React, { Component, Fragment } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { withScriptjs, withGoogleMap, GoogleMap } from \"react-google-maps\";\nimport { withRouter, Route } from \"react-router\";\nimport DocumentTitle from \"react-document-title\";\nimport PropTypes from \"prop-types\";\nimport { uniq, isEqual } from \"lodash\";\n\nimport NodeMarker from \"./NodeMarker\";\nimport KioskMarker from \"./KioskMarker\";\nimport LinkLine from \"./LinkLine\";\nimport NodeDetail from \"../NodeDetail\";\nimport Gallery from \"../Gallery\";\n\nimport { mapStyles } from \"./styles\";\n\nconst DEFAULT_ZOOM = 11;\nconst DEFAULT_CENTER = { lat: 40.72, lng: -73.9595798 };\n\nconst options = {\n\tstyles: mapStyles,\n\tfullscreenControl: false,\n\tstreetViewControl: false,\n\tzoomControlOptions: {\n\t\tposition: \"9\"\n\t},\n\tmapTypeControlOptions: {\n\t\tposition: \"3\"\n\t},\n\tbackgroundColor: \"#f5f5f5\",\n\tgestureHandling: \"greedy\",\n\tclickableIcons: false\n};\n\nconst MapComponent = withScriptjs(\n\twithGoogleMap(props => (\n\t\t<GoogleMap ref={props.mapRef} {...props}>\n\t\t\t{props.children}\n\t\t</GoogleMap>\n\t))\n);\n\nclass MapView extends Component {\n\tstate = {\n\t\tcommandPressed: false\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.map = React.createRef();\n\t\tthis.markerRefs = {};\n\t\tthis.lineRefs = {};\n\t\tthis.lastDoubleClick = Date.now();\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.keyDownHandler = this.handleKeyDown.bind(this);\n\t\tthis.keyUpHandler = this.handleKeyUp.bind(this);\n\t\twindow.addEventListener(\"keydown\", this.keyDownHandler, false);\n\t\twindow.addEventListener(\"keyup\", this.keyUpHandler, false);\n\n\t\tif (this.props.match) {\n\t\t\ttry {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.handleSelectedChange(this.props);\n\t\t\t\t}, 500);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"keydown\", this.keyDownHandler, false);\n\t\twindow.removeEventListener(\"keyup\", this.keyUpHandler, false);\n\t}\n\n\t// This is a kinda hacky way to improve performance\n\t// Instead of rerending the entire map, rerender specific nodes\n\tshouldComponentUpdate(nextProps) {\n\t\tconst nodesChanged = !isEqual(this.props.nodes, nextProps.nodes);\n\t\tconst matchChanged = this.props.match !== nextProps.match;\n\t\tconst filtersChanged = this.props.filters !== nextProps.filters;\n\t\tif (nodesChanged || matchChanged || filtersChanged) {\n\t\t\tthis.handleSelectedChange(nextProps);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\thandleKeyDown(event) {\n\t\tconst { keyCode } = event;\n\t\tif (keyCode === 27) {\n\t\t\tconst { history } = this.props;\n\t\t\thistory.push(\"/\");\n\t\t}\n\n\t\t// Command key\n\t\tif (keyCode === 91 || keyCode === 93) {\n\t\t\tthis.setState({ commandPressed: true });\n\t\t}\n\t}\n\n\thandleKeyUp(event) {\n\t\tconst { keyCode } = event;\n\n\t\t// Command key\n\t\tif (keyCode === 91 || keyCode === 93) {\n\t\t\tthis.setState({ commandPressed: false });\n\t\t}\n\t}\n\n\thandleSelectedChange(nextProps) {\n\t\t// If selected node is unchanged, do not rerender\n\t\tif (!this.props.match && !nextProps.match) return false;\n\n\t\t// If one was selected but none now selected, reset all nodes\n\t\tif (!nextProps.match) {\n\t\t\tthis.resetAllNodes();\n\t\t\treturn false;\n\t\t}\n\n\t\tconst nextSelectedNodeIds = this.selectedNodeIds(nextProps.match);\n\t\tconst nextSelectedMarkers = nextSelectedNodeIds\n\t\t\t.map(id => this.markerRefs[id])\n\t\t\t.filter(m => m); // filter null\n\n\t\tif (!nextSelectedMarkers.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst nextSelectedNodes = nextSelectedMarkers.map(\n\t\t\tmarker => marker.props.node\n\t\t);\n\t\tthis.updateNodes(nextSelectedNodes, nextSelectedMarkers);\n\n\t\tconst matchChanged = this.props.match !== nextProps.match;\n\t\tconst nodesChanged = this.props.nodes !== nextProps.nodes;\n\t\tconst fitBounds = !matchChanged && !nodesChanged;\n\n\t\tconst filtersChanged = this.props.filters !== nextProps.filters;\n\n\t\tif (!filtersChanged) {\n\t\t\tthis.updateLinks(nextSelectedNodes);\n\t\t\tthis.panToNodes(nextSelectedNodes, fitBounds);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { history } = this.props;\n\t\treturn (\n\t\t\t<MapComponent\n\t\t\t\tmapRef={this.map}\n\t\t\t\tdefaultZoom={DEFAULT_ZOOM}\n\t\t\t\tdefaultCenter={DEFAULT_CENTER}\n\t\t\t\tdefaultOptions={options}\n\t\t\t\tonClick={() => {\n\t\t\t\t\t// TODO: Make this less hacky\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\t\tif (now - this.lastDoubleClick > 2000) {\n\t\t\t\t\t\t\thistory.push(\"/\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 500);\n\t\t\t\t}}\n\t\t\t\tonDblClick={() => {\n\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\tthis.lastDoubleClick = now;\n\t\t\t\t}}\n\t\t\t\tloadingElement={<div className=\"h-100\" />}\n\t\t\t\tcontainerElement={<div className=\"h-100\" />}\n\t\t\t\tmapElement={<div className=\"h-100\" />}\n\t\t\t\tgoogleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyBNClp7oJsw-eleEoR3-PQKV23tpeW-FpE\"\n\t\t\t>\n\t\t\t\t{this.renderLinks()}\n\t\t\t\t{this.renderKiosks()}\n\t\t\t\t{this.renderNodes()}\n\t\t\t\t{this.renderNodeDetail()}\n\t\t\t\t<Route\n\t\t\t\t\texact\n\t\t\t\t\tpath=\"/nodes/:nodeId/panoramas/:panoId\"\n\t\t\t\t\tcomponent={Gallery}\n\t\t\t\t/>\n\t\t\t</MapComponent>\n\t\t);\n\t}\n\n\trenderNodes() {\n\t\tconst { nodes, filters } = this.props;\n\n\t\t// TODO: Refactor\n\t\tconst selectedIds = this.selectedNodeIds().reduce(\n\t\t\t(idMap, nodeId) => ({ ...idMap, [nodeId]: true }),\n\t\t\t{}\n\t\t);\n\t\treturn nodes.map(node => {\n\t\t\tconst isFiltered = filters[node.type] === false;\n\t\t\tconst isSelected = selectedIds[node.id] === true;\n\t\t\tlet neighborIsSelected = false;\n\t\t\tif (node.links) {\n\t\t\t\tnode.links.forEach(link => {\n\t\t\t\t\tif (selectedIds[link.from] && selectedIds[link.to]) {\n\t\t\t\t\t\tneighborIsSelected = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst visible = !isFiltered || isSelected || neighborIsSelected;\n\n\t\t\treturn (\n\t\t\t\t<NodeMarker\n\t\t\t\t\tkey={node.id}\n\t\t\t\t\tnode={node}\n\t\t\t\t\tvisible={visible}\n\t\t\t\t\tfilters={filters}\n\t\t\t\t\tonClick={() => this.handleNodeClick(node)}\n\t\t\t\t\tref={ref => this.handleMarkerRef(ref)}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\trenderLinks() {\n\t\tconst { links, filters } = this.props;\n\n\t\t// TODO: Refactor\n\t\tconst selectedIds = this.selectedNodeIds().reduce(\n\t\t\t(idMap, nodeId) => ({ ...idMap, [nodeId]: true }),\n\t\t\t{}\n\t\t);\n\n\t\treturn links.map((link, index) => {\n\t\t\tconst { fromNode, toNode, status } = link;\n\t\t\tif (!fromNode || !toNode) return null;\n\n\t\t\tconst isSelected =\n\t\t\t\tselectedIds[fromNode.id] && selectedIds[toNode.id];\n\t\t\tconst isFiltered =\n\t\t\t\tfilters[fromNode.type] === false ||\n\t\t\t\tfilters[toNode.type] === false ||\n\t\t\t\t(status === \"potential\" && filters.potential === false);\n\t\t\tconst visible = isSelected || !isFiltered;\n\t\t\treturn (\n\t\t\t\t<LinkLine\n\t\t\t\t\tkey={this.linkId(link)}\n\t\t\t\t\tref={ref => {\n\t\t\t\t\t\tthis.handleLineRef(ref);\n\t\t\t\t\t}}\n\t\t\t\t\tvisible={visible}\n\t\t\t\t\tlink={link}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\trenderKiosks() {\n\t\tconst { kiosks } = this.props;\n\t\treturn kiosks.map(kiosk => (\n\t\t\t<KioskMarker key={kiosk.id} kiosk={kiosk} />\n\t\t));\n\t}\n\n\trenderNodeDetail() {\n\t\tconst { match } = this.props;\n\t\tif (!match || !match.params) {\n\t\t\treturn null;\n\t\t}\n\t\tconst nodeIds = this.selectedNodeIds();\n\n\t\tconst nodeTitles = nodeIds.join(\", \");\n\t\tconst title = `${nodeTitles} - Map - NYC Mesh`;\n\t\treturn (\n\t\t\t<DocumentTitle title={title}>\n\t\t\t\t<Fragment>\n\t\t\t\t\t{nodeIds.map(id => (\n\t\t\t\t\t\t<NodeDetail key={id} nodeId={id} />\n\t\t\t\t\t))}\n\t\t\t\t</Fragment>\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\thandleNodeClick(node) {\n\t\tconst { match, history } = this.props;\n\n\t\t// Command click selects multiple nodes\n\t\tif (this.state.commandPressed && match && match.params.nodeId) {\n\t\t\tconst nodeIds = this.selectedNodeIds();\n\t\t\tconst selectedId = node.id.toString();\n\n\t\t\tlet newNodeIds = [];\n\t\t\tif (nodeIds.indexOf(selectedId) > -1) {\n\t\t\t\tnewNodeIds = nodeIds.filter(nodeId => nodeId !== selectedId);\n\t\t\t} else {\n\t\t\t\tnodeIds.push(selectedId);\n\t\t\t\tnewNodeIds = nodeIds;\n\t\t\t}\n\n\t\t\tconst newNodeIdString = uniq(newNodeIds)\n\t\t\t\t.sort()\n\t\t\t\t.join(\"-\");\n\t\t\thistory.replace(`/nodes/${newNodeIdString}`);\n\t\t} else {\n\t\t\thistory.push(`/nodes/${node.id}`);\n\t\t}\n\t}\n\n\tresetAllNodes() {\n\t\tReactDOM.unstable_batchedUpdates(() => {\n\t\t\tObject.values(this.markerRefs).forEach(marker =>\n\t\t\t\tmarker.setVisibility(\"default\")\n\t\t\t);\n\n\t\t\tObject.values(this.lineRefs).forEach(line =>\n\t\t\t\tline.setVisibility(\"default\")\n\t\t\t);\n\t\t});\n\t}\n\n\tupdateNodes(selectedNodes, markers) {\n\t\tReactDOM.unstable_batchedUpdates(() => {\n\t\t\t// Dim all nodes\n\t\t\tObject.values(this.markerRefs).forEach(marker => {\n\t\t\t\tmarker.setVisibility(\"dim\");\n\t\t\t});\n\n\t\t\t// Highlight directly connected nodes\n\t\t\tselectedNodes.forEach(node => {\n\t\t\t\tif (node.connectedNodes) {\n\t\t\t\t\tnode.connectedNodes.forEach(nodeId => {\n\t\t\t\t\t\tconst connectedMarker = this.markerRefs[nodeId];\n\t\t\t\t\t\tif (connectedMarker) {\n\t\t\t\t\t\t\tconnectedMarker.setVisibility(\"secondary\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Highlight selected nodes\n\t\t\tmarkers.forEach(marker => marker.setVisibility(\"highlight\"));\n\t\t});\n\t}\n\n\tupdateLinks(nodes) {\n\t\tReactDOM.unstable_batchedUpdates(() => {\n\t\t\t// Dim all links\n\t\t\tObject.values(this.lineRefs).forEach(line =>\n\t\t\t\tline.setVisibility(\"dim\")\n\t\t\t);\n\n\t\t\t// Highlight direct links\n\t\t\tnodes.forEach(node => {\n\t\t\t\tif (node.links) {\n\t\t\t\t\tnode.links.forEach(link => {\n\t\t\t\t\t\tconst line = this.lineRefs[this.linkId(link)];\n\t\t\t\t\t\tif (line) {\n\t\t\t\t\t\t\tline.setVisibility(\"highlight\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tpanToNodes(nodes, fitBounds) {\n\t\tif (nodes.length === 1) {\n\t\t\tconst [lng, lat] = nodes[0].coordinates;\n\t\t\tthis.map.current.panTo({ lng, lat });\n\t\t\treturn;\n\t\t}\n\n\t\tlet minLng = 9999,\n\t\t\tminLat = 9999,\n\t\t\tmaxLng = -9999,\n\t\t\tmaxLat = -9999;\n\n\t\tnodes.forEach(node => {\n\t\t\tconst [lng, lat] = node.coordinates;\n\t\t\tif (lng < minLng) minLng = lng;\n\t\t\tif (lng > maxLng) maxLng = lng;\n\t\t\tif (lat < minLat) minLat = lat;\n\t\t\tif (lat > maxLat) maxLat = lat;\n\t\t});\n\n\t\tconst newBounds = {\n\t\t\teast: maxLng,\n\t\t\tnorth: maxLat,\n\t\t\tsouth: minLat,\n\t\t\twest: minLng\n\t\t};\n\n\t\tif (fitBounds) {\n\t\t\tthis.map.current.fitBounds(newBounds, window.innerWidth / 10);\n\t\t} else {\n\t\t\tthis.map.current.panToBounds(newBounds, window.innerWidth / 10);\n\t\t}\n\t}\n\n\thandleMarkerRef(ref) {\n\t\tif (ref) {\n\t\t\tthis.markerRefs[ref.props.node.id] = ref;\n\t\t}\n\t}\n\n\thandleLineRef(ref) {\n\t\tif (ref) {\n\t\t\tthis.lineRefs[this.linkId(ref.props.link)] = ref;\n\t\t}\n\t}\n\n\tlinkId(link) {\n\t\treturn `${link.from}-${link.to} ${link.status}`;\n\t}\n\n\tselectedNodeIds(match = this.props.match) {\n\t\tif (!match || !match.params || !match.params.nodeId) {\n\t\t\treturn [];\n\t\t}\n\t\treturn match.params.nodeId.split(\"-\");\n\t}\n}\n\nexport default withRouter(MapView);\n","export const mapStyles = [\n\t{\n\t\telementType: \"labels.icon\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"road\",\n\t\telementType: \"labels.icon\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"road.highway\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tfeatureType: \"transit\",\n\t\tstylers: [\n\t\t\t{\n\t\t\t\tvisibility: \"off\"\n\t\t\t}\n\t\t]\n\t}\n];\n","import { connect } from \"react-redux\";\nimport PureMapView from \"./component\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tnodes: state.nodes,\n\tlinks: state.links,\n\tsectors: state.sectors,\n\tkiosks: state.kiosks,\n\tfilters: state.filters\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(PureMapView);\n","import React, { PureComponent } from \"react\";\n\nimport { icons } from \"../NodeName\";\nimport { nodeColors } from \"../../utils\";\n\n// This should be defined elsewhere\nconst labels = [\"active\", \"supernode\", \"hub\", \"potential\", \"linkNYC\"];\n\nexport default class Filters extends PureComponent {\n\tcomponentDidMount() {\n\t\tconst { toggleFilter } = this.props;\n\t\tconst params = new URLSearchParams(this.props.location.search);\n\t\tif (params.get(\"potential\") === \"true\") toggleFilter(\"potential\");\n\t\tif (params.get(\"linknyc\") === \"true\") toggleFilter(\"linkNYC\");\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"bg-white f5 shadow-2\">\n\t\t\t\t<div role=\"group\" className=\"dib pa2\">\n\t\t\t\t\t<div>{labels.map(label => this.renderFilter(label))}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderFilter(label) {\n\t\tconst { filters, statusCounts, toggleFilter } = this.props;\n\t\tconst enabled = filters[label] || filters[label] === undefined;\n\t\tconst opacity = enabled ? \"o-100\" : \"o-50 strike\";\n\t\treturn (\n\t\t\t<div\n\t\t\t\tkey={label}\n\t\t\t\tclassName={`pointer flex items-center justify-between ${opacity}`}\n\t\t\t\tonClick={() => toggleFilter(label)}\n\t\t\t>\n\t\t\t\t<label\n\t\t\t\t\thtmlFor={label}\n\t\t\t\t\tstyle={{ color: nodeColors[label] }}\n\t\t\t\t\tclassName=\"ttc pointer flex items-center nowrap\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginLeft: \"-0.5rem\",\n\t\t\t\t\t\t\tmarginRight: \"-0.25rem\",\n\t\t\t\t\t\t\tmarginTop: \"-0.125rem\",\n\t\t\t\t\t\t\tmarginBottom: \"-0.125rem\"\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName=\"h2 w2 flex items-center justify-center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{icons[label]}\n\t\t\t\t\t</div>\n\t\t\t\t\t<span className=\"ml1\">\n\t\t\t\t\t\t{label.replace(\"-\", \" \")} ({statusCounts[label] || 0})\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname={label}\n\t\t\t\t\tdefaultChecked={enabled}\n\t\t\t\t\tclassName=\"ma0 ml2 dn\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { connect } from \"react-redux\";\nimport PureFilters from \"./component\";\n\nimport { toggleFilter } from \"../../actions\";\n\nconst mapStateToProps = (state, ownProps) => ({\n\tfilters: state.filters,\n\tstatusCounts: state.statusCounts\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n\ttoggleFilter: label => toggleFilter(label, dispatch)\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PureFilters);\n","export function fetchNodes(dispatch) {\n\tfetch(\"https://node-db.netlify.com/nodes.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_NODES_SUCCESS\", nodes: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function fetchLinks(dispatch) {\n\tfetch(\"https://node-db.netlify.com/links.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_LINKS_SUCCESS\", links: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function fetchKiosks(dispatch) {\n\tfetch(\"https://node-db.netlify.com/kiosks.json\")\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tdispatch({ type: \"FETCH_KIOSKS_SUCCESS\", kiosks: json });\n\t\t})\n\t\t.catch(err => console.log(err));\n}\n\nexport function toggleFilter(label, dispatch) {\n\tdispatch({ type: \"TOGGLE_FILTER\", label });\n}\n","import { nodeType, nodeStatus, linkStatus } from \"../utils\";\n\nimport nodeData from \"../data/nodes\";\nimport linkData from \"../data/links\";\nimport sectorData from \"../data/sectors\";\nimport kiosks from \"../data/kiosks\";\n\nconst initialFilters = {\n\tlinkNYC: false,\n\tpotential: false,\n\tdead: false,\n\t\"potential-hub\": false,\n\t\"potential-supernode\": false\n};\n\nconst { nodes, links, sectors, nodesById } = addGraphData(\n\tnodeData,\n\tlinkData,\n\tsectorData\n);\n\nconst reducer = (\n\tstate = {\n\t\tnodes,\n\t\tlinks,\n\t\tsectors,\n\t\tkiosks: initialFilters.linkNYC === false ? [] : kiosks,\n\t\tnodesById,\n\t\tfilters: initialFilters,\n\t\tstatusCounts: getCounts(nodes, kiosks)\n\t},\n\taction\n) => {\n\tswitch (action.type) {\n\t\tcase \"TOGGLE_FILTER\":\n\t\t\tconst newFilters = {\n\t\t\t\t...state.filters,\n\t\t\t\t[action.label]:\n\t\t\t\t\tstate.filters[action.label] === undefined\n\t\t\t\t\t\t? false\n\t\t\t\t\t\t: !state.filters[action.label]\n\t\t\t};\n\t\t\tif (action.label === \"potential\") {\n\t\t\t\tconst hasValue = state.filters[\"potential\"] === undefined;\n\t\t\t\tconst newValue = hasValue ? false : !state.filters[\"potential\"];\n\t\t\t\tnewFilters[\"dead\"] = newValue;\n\t\t\t\tnewFilters[\"potential-hub\"] = newValue;\n\t\t\t\tnewFilters[\"potential-supernode\"] = newValue;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfilters: newFilters,\n\t\t\t\tkiosks: newFilters.linkNYC === false ? [] : kiosks\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\n// TODO: Calculate a lot of this in node-db\nfunction addGraphData(nodes, links, sectors) {\n\tconst nodesById = {};\n\n\tconst linksByNodeId = {};\n\tlinks.forEach(link => {\n\t\tlinksByNodeId[link.from] = linksByNodeId[link.from] || [];\n\t\tlinksByNodeId[link.to] = linksByNodeId[link.to] || [];\n\t\tlinksByNodeId[link.from].push(link);\n\t\tlinksByNodeId[link.to].push(link);\n\t});\n\n\t// Add status, types and links to nodes\n\tnodes.forEach(node => {\n\t\tnodesById[node.id] = node;\n\t\tnode.status = nodeStatus(node);\n\t\tnode.type = nodeType(node);\n\t\tnode.links = linksByNodeId[node.id];\n\t});\n\n\t// Add status and nodes to links\n\tlinks.forEach(link => {\n\t\tlink.fromNode = nodesById[link.from];\n\t\tlink.toNode = nodesById[link.to];\n\t\tlink.status = linkStatus(link);\n\t});\n\n\t// Add sectors to nodes\n\tconst sectorsByNodeId = {};\n\tsectors.forEach(sector => {\n\t\tsector.node = nodesById[sector.nodeId];\n\t\tsectorsByNodeId[sector.nodeId] = sectorsByNodeId[sector.nodeId] || [];\n\t\tsectorsByNodeId[sector.nodeId].push(sector);\n\t});\n\n\tnodes.forEach(node => {\n\t\tnode.sectors = sectorsByNodeId[node.id];\n\n\t\t// Calculate connected nodes for each active node\n\t\tconst connectedNodes = [node.id];\n\n\t\tlinks.forEach(link => {\n\t\t\tif (link.from === parseInt(node.id, 10)) {\n\t\t\t\tconnectedNodes.push(link.to);\n\t\t\t}\n\n\t\t\tif (link.to === parseInt(node.id, 10)) {\n\t\t\t\tconnectedNodes.push(link.from);\n\t\t\t}\n\t\t});\n\n\t\tnode.connectedNodes = connectedNodes;\n\t});\n\n\treturn { nodes, links, sectors, nodesById };\n}\n\nfunction getCounts(nodes, kiosks) {\n\tconst counts = {};\n\tnodes.forEach(node => {\n\t\tconst { type } = node;\n\t\tcounts[type] = (counts[type] || 0) + 1;\n\n\t\tif (type.indexOf(\"potential-\") > -1 || type === \"dead\") {\n\t\t\tcounts[\"potential\"] = (counts[\"potential\"] || 0) + 1;\n\t\t}\n\n\t\tif (type === \"supernode\" || type === \"hub\") {\n\t\t\tcounts[\"active\"] = (counts[\"active\"] || 0) + 1;\n\t\t}\n\t});\n\tcounts.linkNYC = kiosks.length;\n\treturn counts;\n}\n\nexport default reducer;\n","import { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport DocumentTitle from \"react-document-title\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nimport React, { Component } from \"react\";\nimport SearchBar from \"./components/SearchBar\";\nimport MapView from \"./components/MapView\";\nimport Filters from \"./components/Filters\";\n\nimport rootReducer from \"./reducers\";\n\nconst store = createStore(rootReducer);\n\nclass App extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<DocumentTitle title=\"Map - NYC Mesh\">\n\t\t\t\t<Provider store={store}>\n\t\t\t\t\t<Router basename=\"/map\">\n\t\t\t\t\t\t<div className=\"h-100 w-100 relative sans-serif\">\n\t\t\t\t\t\t\t<div className=\"absolute pa2 z-999 search-bar\">\n\t\t\t\t\t\t\t\t<SearchBar />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/nodes/:nodeId\"\n\t\t\t\t\t\t\t\tchildren={({ match }) => (\n\t\t\t\t\t\t\t\t\t<MapView match={match} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"absolute bottom-0 left-0 ma2\">\n\t\t\t\t\t\t\t\t<Route component={Filters} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Router>\n\t\t\t\t</Provider>\n\t\t\t</DocumentTitle>\n\t\t);\n\t}\n\n\thandleNodeClick(node) {}\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nif (process.env.NODE_ENV === \"development\") require(\"tachyons\");\n\nReactDOM.render(<App />, document.getElementById(\"map-root\"));\n"],"sourceRoot":""}